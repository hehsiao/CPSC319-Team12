google.load("visualization", "1", {packages:["corechart"]});
google.setOnLoadCallback(drawChart);
function drawChart() {
var data = google.visualization.arrayToDataTable([
	['User', 'Success Rate (%)'],
	<% @users.each do |user| %>
		<% verified = 0 %>
		<% owner_of = 0 %>
		<% @ideas.each do |idea| %>
			<% if idea.user_id == user.id %>
			<% owner_of += 1 %>
				<% if idea.status == @status_size %>
				<% verified += 1 %>
				<% end %>
			<% end %>
		<% end %>
		<% if verified == 0 %>
			["<%= user.first_name + " " + user.last_name %>", 0],
		<% else %>
			["<%= user.first_name + " " + user.last_name %>", <%= verified*100/owner_of %>],
		<% end %>
	<% end %>
]);

var options = {
  title: 'Success Rate',
  hAxis: {title: 'Users', titleTextStyle: {color: 'red'}}
};

var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
chart.draw(data, options);
}